Все компоненты устанавливать ТОЛЬКО через `npx shadcn@latest add <component>`. Если нужен компонент не из shadcn — обсуждать отдельно.

---

## Порядок реализации

### Фаза 1 — Тема и shadcn-компоненты (фундамент UI)

- [ ] **8. Тёмная/светлая/системная тема везде**
  - SSO пока не имеет ThemeContext/ThemeProvider — добавить (services и traffic уже имеют)
  - Убедиться, что CSS-переменные dark-режима одинаковы во всех apps (брать из traffic как эталон)
  - Добавить переключатель темы во все интерфейсы (можно в sidebar после фазы 2)

- [ ] **12. Стандартизировать AlertDialog**
  - Заменить нативный `confirm()` на `AlertDialog` из shadcn везде
  - У всех диалогов: отступы от краёв экрана (на мобильном), скруглённые углы
  - Компонент `<ConfirmDialog>` — переиспользуемый, вынести в `components/shared/`

- [ ] **2. Input groups везде**
  - Установить `input-group` (https://ui.shadcn.com/docs/components/radix/input-group)
  - Заменить все plain `<Input>` на Input-Group с нужными кейсами (пароль — глаз, поиск — иконка, и т.д.)
  - Большие поля → `Textarea` из shadcn

- [ ] **4. Select из shadcn везде**
  - Заменить нативные `<select>` на `Select` из shadcn (https://ui.shadcn.com/docs/components/radix/select)

- [ ] **3. Checkbox из shadcn везде**
  - Заменить нативные `<input type="checkbox">` на `Checkbox` из shadcn

- [ ] **5. Кнопки — только через Button shadcn**
  - Аудит всех кнопок, замена нативных `<button>` на `<Button>` из shadcn

### Фаза 2 — Layout: Sidebar во всех админках

- [ ] **1. Sidebar во всех admin-интерфейсах**
  - Установить `sidebar` компонент (https://ui.shadcn.com/docs/components/radix/sidebar)
  - **services**: заменить `app-layout.tsx` sidebar-layout для staff/admin/executor
  - **traffic**: заменить header на sidebar для admin и teacher кабинетов
  - **sso**: sidebar для SSO admin panel
  - В sidebar: навигация + кнопка выхода + переключатель темы
  - Единый стиль во всех приложениях

- [ ] **9. Переиспользуемые UI-компоненты**
  - После sidebar — вынести повторяющиеся блоки в shared-компоненты внутри каждого приложения

### Фаза 3 — Фичи SSO

- [ ] **11. Автогенерация логина из ФИО в SSO**
  - При создании пользователя: поле login формируется из ФИО
  - Алгоритм: `Ларионенко Артём Александрович` → `larionenko.aa`; `Ларионенко Артём` → `larionenko.a`
  - Коллизии: если логин занят, добавлять суффикс `2`, `3`, и т.д. (проверка через API)

- [ ] **6. Data Table в SSO для списка пользователей**
  - Установить `data-table` (https://ui.shadcn.com/docs/components/radix/data-table)
  - Использовать в `AdminPage.tsx` для таблицы пользователей SSO

### Фаза 4 — Замена QR-кодов на OTP-коды (traffic)

- [ ] **7. Убрать QR-коды для регистрации киосков и сессий преподавателя**
  - QR-коды остаются только для студентов (на экране киоска для отметки посещаемости)
  - **Регистрация киоска**: вместо QR-кода для регистрации → 6-значный цифровой код на экране киоска
    - Админ вводит этот код в своём интерфейсе через `InputOTP` (https://ui.shadcn.com/docs/components/radix/input-otp), разделение 3+3
  - **Сессия преподавателя**: вместо QR-кода на киоске для препода → 6-значный код на экране киоска
    - Препод вводит код через `InputOTP` (3+3) в Sheet из shadcn
  - Бэкенд: заменить `init_secret`-схему на числовые коды (6-значный PIN для регистрации, отдельный PIN для сессии)

### Фаза 5 — Переработка преподавательского флоу (traffic)

- [ ] **13. Переработать логику работы преподавателя**
  1. **Синхронизация преподавателей из RUZ**: `GET https://ruz.spbstu.ru/api/v1/ruz/teachers` → автоматически добавлять всех в БД с генерацией пароля. Убрать ручное добавление. Добавить поле `ruz_id` в модель Teacher.
  2. **Расписание на сегодня**: при входе препод видит расписание через `GET https://ruz.spbstu.ru/api/v1/ruz/teachers/{ruz_id}/scheduler`. Кнопка «Начать отслеживание» у каждого занятия.
  3. **Начало сессии через Sheet**: нажатие → Sheet из shadcn с `InputOTP` для ввода кода киоска. Препод вводит код → подтверждает → киоск переходит в активный режим.
  4. **Занятие не из расписания**: блок «Нужного занятия нет в списке?» + кнопка → ввод названия дисциплины + ввод кода киоска → начало отслеживания.
  5. **История**: список прошлых сессий с названием, датой/временем, аудиторией (через связь киоск–аудитория).

### Фаза 6 — Дополнительные компоненты

- [ ] **10. Дополнительные shadcn-компоненты по необходимости**
  - Изучить https://ui.shadcn.com/docs/components и применять по ситуации в ходе реализации выше

---

## Правила по компонентам

- Inputs → `input-group`
- Large inputs → `Textarea`
- Checkboxes → `Checkbox`
- Dropdowns → `Select`
- Buttons → `Button`
- OTP-ввод → `InputOTP` (разделение 3+3)
- Data table → `DataTable`
- Sidebar → `Sidebar`
- Confirmations → `AlertDialog` (shared `ConfirmDialog`)
